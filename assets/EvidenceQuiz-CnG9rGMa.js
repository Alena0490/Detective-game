import{r as l,j as n}from"./index-B5-4rsTe.js";const C=({onFound:t,children:a})=>{const[s,o]=l.useState(!1),d=c=>{c.preventDefault(),!s&&(o(!0),t())};return n.jsx("button",{type:"button",className:`clue-word ${s?"clue-word--found":""}`,onClick:d,children:a})},k={newspaper:[{id:"newspaper-witness-first-name",label:"What is the first name of the woman who told the police about the events in 1955?",kind:"text",placeholder:"First name",correctAnswers:["anna"]}],ticket:[{id:"ticket-max-speed",label:"What is the highest speed the metro was supposed to travel?",kind:"number",placeholder:"Line-0 maximum speed",correctAnswers:["900"]}],militaryPlans:[{id:"map-metro-open-year",label:"In which year was opened the first official Metro line?",kind:"year",placeholder:"Year",correctAnswers:["1974"]}],security:[{id:"security-time-on-camera",label:"At what time does the subject first appear on camera in the security footage?",kind:"time",placeholder:"Time",correctAnswers:["03:12"]}],interrogations:[{id:"testimonies-event-year",label:"In what year did the event occur that Anna connects to the current case?",kind:"year",placeholder:"Year",correctAnswers:["1955"]}],medical:[{id:"medical-biggest-issue",label:"What is the main problem with the man's medical results?",kind:"text",options:["His blood pressure is too low","He underwent treatments that are no longer used in current medicine","He has no visible injuries"],correctAnswers:["He underwent treatments that are no longer used in current medicine"]}],photo:[{id:"photo-year",label:"Which year on the photo connects it to Anna's story?",kind:"year",placeholder:"Year",correctAnswers:["1955"]}],watch:[{id:"watch-where-found",label:"Where was the watch found?",kind:"text",options:["On the ground near the tracks","With the man","Inside the control room"],correctAnswers:["With the man"]}],diary:[{id:"diary-full-name",label:"What is the full name of the man who made the last record in the diary?",kind:"text",placeholder:"Full name",correctAnswers:["antonin richter","antonÃ­n richter","antoninrichter"]}],incident:[{id:"incident-voltage-spike",label:"What percentage of the normal voltage did the power reach during the spike?",kind:"number",placeholder:"Value",correctAnswers:["400"]}]},j="amnesia:quizSolved:",b=t=>j+t.map(a=>a.id).sort().join("|"),N=t=>k[t]??[],z=t=>t.trim().toLowerCase().replace(/\s+/g," "),v=(t,a="text")=>{const s=t.trim();if(!s)return"";switch(a){case"number":case"year":return s.replace(/\D+/g,"");case"time":return s.replace(/\D+/g,"").padStart(4,"0");case"text":default:return z(s)}},m=(t="text")=>t==="number"||t==="year"?"number":t==="time"?"time":"text",E=({title:t="Evidence questions",questions:a,onSolved:s})=>{const[o,d]=l.useState({}),[c,u]=l.useState(null),[p,y]=l.useState(()=>{if(typeof window>"u")return!1;try{const e=b(a);return window.localStorage.getItem(e)==="1"}catch{return!1}}),w=(e,r)=>{d(i=>({...i,[e]:r}))},x=e=>{e.preventDefault(),u(null);for(const r of a){const i=r.kind??"text",g=o[r.id]??"",f=v(g,i);if(!f){u("Please answer all questions.");return}if(!r.correctAnswers.map(h=>v(h,i)).some(h=>h===f)){u("One or more answers are incorrect. Try again.");return}}y(!0);try{const r=b(a);window.localStorage.setItem(r,"1")}catch{}s()};return n.jsxs("article",{className:"evidence-quiz",children:[n.jsx("h3",{className:"evidence-quiz-title",children:t}),p&&n.jsx("p",{className:"evidence-quiz-success",children:"Evidence solved."}),!p&&n.jsxs("form",{onSubmit:x,className:"quiz-form",children:[a.map(e=>n.jsxs("div",{className:"quiz-question",children:[n.jsx("label",{...e.options?{}:{htmlFor:e.id},children:e.label}),e.options?n.jsx("div",{className:"quiz-options",children:e.options.map(r=>n.jsxs("label",{className:"quiz-option",children:[n.jsx("input",{type:"radio",name:e.id,value:r,checked:o[e.id]===r,onChange:i=>w(e.id,i.target.value)}),n.jsx("span",{children:r})]},r))}):n.jsx("input",{id:e.id,type:m(e.kind),inputMode:m(e.kind)==="number"?"numeric":void 0,step:m(e.kind)==="number"?1:void 0,value:o[e.id]??"",onChange:r=>w(e.id,r.target.value),placeholder:e.placeholder,autoComplete:"off"})]},e.id)),c&&n.jsx("p",{className:"evidence-quiz-error",children:c}),n.jsx("button",{type:"submit",className:"quiz-submit button",children:"Submit"})]})]})};export{C,E,N as g};
